(this["webpackJsonplinky-ui"]=this["webpackJsonplinky-ui"]||[]).push([[0],{67:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(23),r=a.n(s),i=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,108)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))},j=(a(67),a(68),a(15)),o=a(8),l=a(58),b=a.n(l).a.create(!1),u=a(104),d=a(1),h=function(e){var t=Object(c.useState)([]),a=Object(o.a)(t,2),n=a[0],s=a[1];Object(c.useEffect)((function(){s(e.src)}),[e.src]);var r=function(){s(["/logo192.png"])};return n.length>1?Object(d.jsx)(u.a,{interval:null,children:n.map((function(t,a){return Object(d.jsx)(u.a.Item,{children:Object(d.jsx)("img",Object(j.a)(Object(j.a)({alt:"Post",className:"w-100 h-auto"},e),{},{src:t,onError:r}))},e.postid.concat(a))}))}):Object(d.jsx)("img",Object(j.a)(Object(j.a)({alt:"Post",className:"w-100 h-auto"},e),{},{src:n,onError:r}))},O=a(16),x=a(105),p=a(106),m=a(102),f=a(61),v=function(e){return Object(d.jsxs)(x.a,{className:"navbar",bg:"light",expand:"lg",children:[Object(d.jsx)(x.a.Brand,{children:Object(d.jsx)(O.b,{to:"/",children:"Linky"})}),Object(d.jsx)(x.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(d.jsxs)(x.a.Collapse,{id:"basic-navbar-nav",children:[Object(d.jsxs)(p.a,{className:"mr-auto",children:[Object(d.jsx)(x.a.Text,{children:Object(d.jsx)(O.b,{to:"/about",children:"About"})}),Object(d.jsxs)(m.a,{title:"Topics",id:"basic-nav-dropdown",children:[Object(d.jsx)(m.a.Item,{href:"#action/2.1",children:"Action"}),Object(d.jsx)(m.a.Item,{href:"#action/2.2",children:"Another action"}),Object(d.jsx)(m.a.Item,{href:"#action/2.3",children:"Something"}),Object(d.jsx)(m.a.Divider,{}),Object(d.jsx)(m.a.Item,{href:"#action/2.4",children:"Separated link"})]})," "]})," ",e.user&&Object(d.jsx)(O.b,{to:"/submit",children:Object(d.jsx)(f.a,{children:"Create Post"})}),e.user?Object(d.jsx)(m.a,{title:e.user.username,children:Object(d.jsx)(m.a.Item,{onClick:function(){e.setUser(),localStorage.removeItem("user")},children:"Sign out"})}):Object(d.jsx)(O.b,{to:"/login",children:Object(d.jsx)(f.a,{children:"Login"})})]})]})},g=a(18),y=a.n(g),S=a(27),N=a(103),w=a(107),C=a(7),k=function(e){var t=Object(c.useState)({}),a=Object(o.a)(t,2),n=a[0],s=a[1],r=Object(C.f)(),i=r.pathname.split("/"),j=i[i.length-1];Object(c.useEffect)((function(){s(r.state),b.get("api/post/"+j).then((function(e){s(e.data[0])}))}),[j,r]);var l=Object(c.useState)(""),u=Object(o.a)(l,2),x=u[0],p=u[1],m=function(){var t=Object(S.a)(y.a.mark((function t(a){var c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.post("/api/post/".concat(j,"/comment"),{text:x},{headers:{Authorization:"Bearer ".concat(e.user.token)}});case 3:c=t.sent,console.log(c),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Message send failed.",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"app",children:n&&Object.keys(n).length>0?Object(d.jsxs)("div",{children:[Object(d.jsxs)(w.a,{className:"mb-5",children:[Object(d.jsxs)(w.a.Header,{children:[Object(d.jsx)("p",{children:n.username}),Object(d.jsx)("p",{children:n.date})]}),Object(d.jsx)(h,{postid:n._id,src:n.attachment}),Object(d.jsxs)(w.a.Body,{style:{opacity:.8},children:[Object(d.jsx)(w.a.Text,{className:"my-1",children:n.text}),Object(d.jsxs)("div",{style:{overflow:"auto"},children:[Object(d.jsx)(w.a.Text,{className:"float-left mb-1",children:n.date}),Object(d.jsxs)(w.a.Text,{className:"float-right",children:[Object(d.jsx)("i",{className:"fas fa-share"}),Object(d.jsx)("i",{className:"fas fa-heart mx-2"})]})]})]})]},n._id),Object(d.jsxs)("div",{className:"comment",children:[e.user?Object(d.jsx)("div",{children:Object(d.jsxs)(N.a,{onSubmit:m,className:"overflow-hidden mb-5",children:[Object(d.jsx)(N.a.Group,{children:Object(d.jsx)(N.a.Control,{value:x,onChange:function(e){var t=e.target;return p(t.value)},placeholder:"Type your comment here"})}),Object(d.jsx)(f.a,{variant:"primary",type:"submit",className:"float-right",children:"Submit"}),Object(d.jsx)(f.a,{variant:"secondary",type:"submit",className:"float-right mr-2",children:"Cancel"})]})}):Object(d.jsx)("div",{children:Object(d.jsxs)(N.a,{className:"overflow-hidden mb-5",children:[Object(d.jsx)(N.a.Group,{children:Object(d.jsx)(N.a.Control,{placeholder:"You must be logged in to comment"})}),Object(d.jsx)(O.b,{to:"/login",children:Object(d.jsx)(f.a,{variant:"primary",type:"submit",className:"float-right",children:"Login"})})]})}),Object(d.jsx)("hr",{}),n.comment.map((function(e){return Object(d.jsxs)(w.a.Text,{children:[Object(d.jsx)("span",{children:Object(d.jsx)("b",{children:e.username})}),Object(d.jsx)("span",{className:"ml-3",children:e.text})]})}))]})]}):Object(d.jsx)("div",{})})},T=a(62),E=function(e){var t=Object(c.useState)(""),a=Object(o.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),j=i[0],l=i[1],u=Object(c.useState)(""),h=Object(o.a)(u,2),O=h[0],x=h[1],p=function(){var t=Object(S.a)(y.a.mark((function t(a){var c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,b.post("/api/user/signup",{username:n,password:j});case 4:(c=t.sent).data&&(localStorage.setItem("token",JSON.stringify(c.data)),e.setUser(c.data),e.history.push("/")),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),s(""),l(""),x("Unable to sign-up.");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"app",children:Object(d.jsxs)(N.a,{onSubmit:p,children:[Object(d.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(d.jsx)(N.a.Label,{children:"Email address"}),Object(d.jsx)(N.a.Control,{type:"text",placeholder:"Enter username",value:n,onChange:function(e){var t=e.target;return s(t.value)}}),Object(d.jsx)(N.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(d.jsxs)(N.a.Group,{controlId:"formBasicPassword",children:[Object(d.jsx)(N.a.Label,{children:"Password"}),Object(d.jsx)(N.a.Control,{type:"password",placeholder:"Password",value:j,onChange:function(e){var t=e.target;return l(t.value)}})]}),Object(d.jsx)(N.a.Text,{children:O}),Object(d.jsx)(f.a,{variant:"primary",type:"submit",children:"Submit"})]})})},I=function(e){var t=Object(c.useState)(""),a=Object(o.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),j=i[0],l=i[1],u=Object(c.useState)(""),h=Object(o.a)(u,2),x=h[0],p=h[1],m=function(){var t=Object(S.a)(y.a.mark((function t(a){var c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,b.post("/api/user/login",{username:n,password:j});case 4:(c=t.sent).data&&(localStorage.setItem("user",JSON.stringify(c.data)),e.setUser(c.data),e.history.push("/")),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),s(""),l(""),p("Unable to login.");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"app login",children:Object(d.jsxs)(N.a,{onSubmit:m,children:[Object(d.jsxs)(N.a.Group,{controlId:"formBasicEmail",children:[Object(d.jsx)(N.a.Label,{children:"Email address"}),Object(d.jsx)(N.a.Control,{placeholder:"Enter email",value:n,onChange:function(e){var t=e.target;return s(t.value)}}),Object(d.jsx)(N.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(d.jsxs)(N.a.Group,{controlId:"formBasicPassword",children:[Object(d.jsx)(N.a.Label,{children:"Password"}),Object(d.jsx)(N.a.Control,{type:"password",placeholder:"Password",value:j,onChange:function(e){var t=e.target;return l(t.value)}})]}),Object(d.jsxs)(N.a.Text,{children:["Don't have an account? Sign up ",Object(d.jsx)(O.b,{to:"/signup",children:Object(d.jsx)("u",{children:"here."})})]}),Object(d.jsx)(N.a.Text,{children:x}),Object(d.jsx)(f.a,{variant:"primary",type:"submit",children:"Submit"})]})})},L=function(e){var t=Object(c.useState)(""),a=Object(o.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),j=i[0],l=i[1],u=Object(c.useState)(""),h=Object(o.a)(u,2),O=h[0],x=h[1],p=function(){var t=Object(S.a)(y.a.mark((function t(a){var c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,b.post("/api/post",{text:O,attachment:j,title:n},{headers:{Authorization:"Bearer ".concat(e.user.token)}});case 4:c=t.sent,console.log(c),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Message send failed.",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"app login",children:[Object(d.jsx)("h2",{children:"Make a new post"}),Object(d.jsxs)(N.a,{onSubmit:p,children:[Object(d.jsx)(N.a.Group,{children:Object(d.jsx)(N.a.Control,{value:n,onChange:function(e){var t=e.target;return s(t.value)},placeholder:"Title"})}),Object(d.jsx)(N.a.Group,{children:Object(d.jsx)(N.a.Control,{value:j,onChange:function(e){var t=e.target;return l(t.value)},placeholder:"Attachment URL"})}),Object(d.jsx)(N.a.Group,{children:Object(d.jsx)(N.a.Control,{value:O,onChange:function(e){var t=e.target;return x(t.value)},className:"submit",placeholder:"Text"})}),Object(d.jsx)(f.a,{variant:"primary",type:"submit",children:"Submit"})]})]})},B=(a(96),function(e){var t=Object(c.useState)([]),a=Object(o.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(0),i=Object(o.a)(r,2),l=i[0],u=i[1],x=Object(c.useState)(!0),p=Object(o.a)(x,2),m=p[0],f=p[1];return Object(c.useEffect)((function(){b.get("api/posts/".concat(l)).then((function(e){e.data.forEach((function(e){e.date=new Date(e.createdAt).toDateString()})),s(e.data),u(l+1)}))}),[]),Object(c.useEffect)((function(){document.title="Linky"}),[]),Object(d.jsx)("div",Object(j.a)(Object(j.a)({},e),{},{children:Object(d.jsx)(T.a,{dataLength:n.length,next:function(){b.get("api/posts/".concat(l)).then((function(e){e.data.length>0?(e.data.forEach((function(e){e.date=new Date(e.createdAt).toDateString()})),s(n.concat(e.data)),u(l+1)):f(!1)}))},hasMore:m,loader:Object(d.jsx)("h4",{children:"Loading..."}),endMessage:Object(d.jsx)("h4",{children:"End of posts..."}),scrollThreshold:.95,children:n.map((function(e){return Object(d.jsxs)(w.a,{className:"mb-5",children:[Object(d.jsxs)(w.a.Header,{children:[Object(d.jsxs)("div",{className:"overflow-auto",children:[Object(d.jsx)("p",{className:"float-left",children:e.username}),Object(d.jsx)("p",{className:"float-right",children:e.date})]}),Object(d.jsx)("p",{children:Object(d.jsx)("b",{children:e.title})})]}),Object(d.jsx)(h,{postid:e._id,src:e.attachment}),Object(d.jsxs)(w.a.Body,{style:{opacity:.8},children:[Object(d.jsx)(w.a.Text,{className:"my-1",children:e.text}),Object(d.jsx)("div",{style:{overflow:"auto"},children:Object(d.jsxs)(w.a.Text,{className:"float-right",children:[Object(d.jsx)("i",{className:"fas fa-share"}),Object(d.jsx)("i",{className:"fas fa-heart mx-2"})]})}),e.comment.map((function(e){return Object(d.jsxs)(w.a.Text,{children:[Object(d.jsx)("span",{children:Object(d.jsx)("b",{children:e.username})}),Object(d.jsx)("span",{className:"ml-3",children:e.text})]})})),Object(d.jsx)(w.a.Text,{children:Object(d.jsx)(O.b,{to:{pathname:"/post/"+e._id},children:"See full post"})})]})]},e._id)}))})}))}),P=function(){return Object(c.useEffect)((function(){document.title="About"}),[]),Object(d.jsx)("p",{className:"mx-1 mt-4",children:"Linky"})},A=function(){var e=Object(c.useState)(),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){console.log(document.body.clientHeight),console.log(window.scrollY),console.log(window.innerHeight);var e=localStorage.getItem("user");e&&(e=JSON.parse(e),n(e))}),[]),Object(d.jsx)(O.a,{children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(v,{user:a,setUser:n}),Object(d.jsxs)(C.c,{children:[Object(d.jsx)(C.a,{exact:!0,path:"/",children:Object(d.jsx)(B,{className:"app"})}),Object(d.jsx)(C.a,{path:"/about",children:Object(d.jsx)(P,{})}),Object(d.jsx)(C.a,{path:"/post/:id",render:function(e){return Object(d.jsx)(k,{user:a})}}),Object(d.jsx)(C.a,{path:"/login",render:function(e){return Object(d.jsx)(I,Object(j.a)({setUser:n},e))}}),Object(d.jsx)(C.a,{path:"/signup",render:function(e){return Object(d.jsx)(E,Object(j.a)({setUser:n},e))}}),Object(d.jsx)(C.a,{path:"/submit",render:function(e){return Object(d.jsx)(L,{user:a})}})]})]})})};r.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(A,{})}),document.getElementById("root")),i()}},[[97,1,2]]]);
//# sourceMappingURL=main.34fd5ab8.chunk.js.map
(this["webpackJsonplinky-ui"]=this["webpackJsonplinky-ui"]||[]).push([[0],{67:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(22),r=a.n(s),i=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,108)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))},j=(a(67),a(68),a(15)),l=a(12),o=a(58),b=a.n(o).a.create(!1),d=a(104),u=a(1),h=function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),n=a[0],s=a[1];Object(c.useEffect)((function(){s(e.src)}),[e.src]);var r=function(){s(["/logo192.png"])};return n.length>1?Object(u.jsx)(d.a,{interval:null,children:n.map((function(t,a){return Object(u.jsx)(d.a.Item,{children:Object(u.jsx)("img",Object(j.a)(Object(j.a)({alt:"Post",className:"w-100 h-auto"},e),{},{src:t,onError:r}))},e.postid.concat(a))}))}):Object(u.jsx)("img",Object(j.a)(Object(j.a)({alt:"Post",className:"w-100 h-auto"},e),{},{src:n,onError:r}))},O=a(19),x=a(105),p=a(106),m=a(102),f=a(61),g=function(e){return Object(u.jsxs)(x.a,{className:"navbar",bg:"light",expand:"lg",children:[Object(u.jsx)(x.a.Brand,{children:Object(u.jsx)(O.b,{to:"/",children:"Linky"})}),Object(u.jsx)(x.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(u.jsxs)(x.a.Collapse,{id:"basic-navbar-nav",children:[Object(u.jsxs)(p.a,{className:"mr-auto",children:[Object(u.jsx)(x.a.Text,{children:Object(u.jsx)(O.b,{to:"/about",children:"About"})}),Object(u.jsxs)(m.a,{title:"Topics",id:"basic-nav-dropdown",children:[Object(u.jsx)(m.a.Item,{href:"#action/2.1",children:"Action"}),Object(u.jsx)(m.a.Item,{href:"#action/2.2",children:"Another action"}),Object(u.jsx)(m.a.Item,{href:"#action/2.3",children:"Something"}),Object(u.jsx)(m.a.Divider,{}),Object(u.jsx)(m.a.Item,{href:"#action/2.4",children:"Separated link"})]})," "]})," ",e.user?Object(u.jsx)(m.a,{title:e.user.username,children:Object(u.jsx)(m.a.Item,{onClick:function(){e.setUser(),localStorage.removeItem("user")},children:"Sign out"})}):Object(u.jsx)(O.b,{to:"/login",children:Object(u.jsx)(f.a,{children:"Login"})})]})]})},v=a(107),y=a(7),S=function(){var e=Object(c.useState)({}),t=Object(l.a)(e,2),a=t[0],n=t[1],s=Object(y.f)();return Object(c.useEffect)((function(){n(s.state);var e=s.pathname.split("/"),t=e[e.length-1];b.get("api/post/"+t).then((function(e){n(e.data[0])}))}),[s]),Object(u.jsx)("div",{className:"app",children:a&&Object.keys(a).length>0?Object(u.jsxs)(v.a,{className:"mb-5",children:[Object(u.jsxs)(v.a.Header,{children:[Object(u.jsx)("p",{children:a.username}),Object(u.jsx)("p",{children:a.date})]}),Object(u.jsx)(h,{postid:a._id,src:a.attachment}),Object(u.jsxs)(v.a.Body,{style:{opacity:.8},children:[Object(u.jsx)(v.a.Text,{className:"my-1",children:a.text}),Object(u.jsxs)("div",{style:{overflow:"auto"},children:[Object(u.jsx)(v.a.Text,{className:"float-left mb-1",children:a.date}),Object(u.jsxs)(v.a.Text,{className:"float-right",children:[Object(u.jsx)("i",{className:"fas fa-share"}),Object(u.jsx)("i",{className:"fas fa-heart mx-2"})]})]}),a.comment.map((function(e){return Object(u.jsxs)(v.a.Text,{children:[Object(u.jsx)("span",{children:Object(u.jsx)("b",{children:e.username})}),Object(u.jsx)("span",{className:"ml-3",children:e.text})]})}))]})]},a._id):Object(u.jsx)("div",{})})},N=a(62),w=a(31),T=a.n(w),E=a(48),I=a(103),k=function(e){var t=Object(c.useState)(""),a=Object(l.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),j=i[0],o=i[1],d=Object(c.useState)(""),h=Object(l.a)(d,2),O=h[0],x=h[1],p=function(){var t=Object(E.a)(T.a.mark((function t(a){var c;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,b.post("/api/user/signup",{username:n,password:j});case 4:(c=t.sent).data&&(localStorage.setItem("token",JSON.stringify(c.data)),e.setUser(c.data),e.history.push("/")),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),s(""),o(""),x("Unable to sign-up.");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"app",children:Object(u.jsxs)(I.a,{onSubmit:p,children:[Object(u.jsxs)(I.a.Group,{controlId:"formBasicEmail",children:[Object(u.jsx)(I.a.Label,{children:"Email address"}),Object(u.jsx)(I.a.Control,{type:"text",placeholder:"Enter username",value:n,onChange:function(e){var t=e.target;return s(t.value)}}),Object(u.jsx)(I.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(u.jsxs)(I.a.Group,{controlId:"formBasicPassword",children:[Object(u.jsx)(I.a.Label,{children:"Password"}),Object(u.jsx)(I.a.Control,{type:"password",placeholder:"Password",value:j,onChange:function(e){var t=e.target;return o(t.value)}})]}),Object(u.jsx)(I.a.Text,{children:O}),Object(u.jsx)(f.a,{variant:"primary",type:"submit",children:"Submit"})]})})},C=function(e){var t=Object(c.useState)(""),a=Object(l.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),j=i[0],o=i[1],d=Object(c.useState)(""),h=Object(l.a)(d,2),x=h[0],p=h[1],m=function(){var t=Object(E.a)(T.a.mark((function t(a){var c;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,b.post("/api/user/login",{username:n,password:j});case 4:(c=t.sent).data&&(localStorage.setItem("user",JSON.stringify(c.data)),e.setUser(c.data),e.history.push("/")),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),s(""),o(""),p("Unable to login.");case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"app login",children:Object(u.jsxs)(I.a,{onSubmit:m,children:[Object(u.jsxs)(I.a.Group,{controlId:"formBasicEmail",children:[Object(u.jsx)(I.a.Label,{children:"Email address"}),Object(u.jsx)(I.a.Control,{placeholder:"Enter email",value:n,onChange:function(e){var t=e.target;return s(t.value)}}),Object(u.jsx)(I.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(u.jsxs)(I.a.Group,{controlId:"formBasicPassword",children:[Object(u.jsx)(I.a.Label,{children:"Password"}),Object(u.jsx)(I.a.Control,{type:"password",placeholder:"Password",value:j,onChange:function(e){var t=e.target;return o(t.value)}})]}),Object(u.jsxs)(I.a.Text,{children:["Don't have an account? Sign up ",Object(u.jsx)(O.b,{to:"/signup",children:"here."})]}),Object(u.jsx)(I.a.Text,{children:x}),Object(u.jsx)(f.a,{variant:"primary",type:"submit",children:"Submit"})]})})},L=(a(96),function(e){var t=Object(c.useState)([]),a=Object(l.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(0),i=Object(l.a)(r,2),o=i[0],d=i[1],x=Object(c.useState)(!0),p=Object(l.a)(x,2),m=p[0],f=p[1];return Object(c.useEffect)((function(){b.get("api/posts/".concat(o)).then((function(e){e.data.forEach((function(e){e.date=new Date(e.createdAt).toDateString()})),s(e.data),d(o+1)}))}),[]),Object(c.useEffect)((function(){document.title="Linky"}),[]),Object(u.jsx)("div",Object(j.a)(Object(j.a)({},e),{},{children:Object(u.jsx)(N.a,{dataLength:n.length,next:function(){b.get("api/posts/".concat(o)).then((function(e){e.data.length>0?(e.data.forEach((function(e){e.date=new Date(e.createdAt).toDateString()})),s(n.concat(e.data)),d(o+1)):f(!1)}))},hasMore:m,loader:Object(u.jsx)("h4",{children:"Loading..."}),endMessage:Object(u.jsx)("h4",{children:"End of posts..."}),scrollThreshold:.95,children:n.map((function(e){return Object(u.jsxs)(v.a,{className:"mb-5",children:[Object(u.jsxs)(v.a.Header,{children:[Object(u.jsxs)("div",{className:"overflow-auto",children:[Object(u.jsx)("p",{className:"float-left",children:e.username}),Object(u.jsx)("p",{className:"float-right",children:e.date})]}),Object(u.jsx)("p",{children:Object(u.jsx)("b",{children:e.title})})]}),Object(u.jsx)(h,{postid:e._id,src:e.attachment}),Object(u.jsxs)(v.a.Body,{style:{opacity:.8},children:[Object(u.jsx)(v.a.Text,{className:"my-1",children:e.text}),Object(u.jsx)("div",{style:{overflow:"auto"},children:Object(u.jsxs)(v.a.Text,{className:"float-right",children:[Object(u.jsx)("i",{className:"fas fa-share"}),Object(u.jsx)("i",{className:"fas fa-heart mx-2"})]})}),e.comment.map((function(e){return Object(u.jsxs)(v.a.Text,{children:[Object(u.jsx)("span",{children:Object(u.jsx)("b",{children:e.username})}),Object(u.jsx)("span",{className:"ml-3",children:e.text})]})})),Object(u.jsx)(v.a.Text,{children:Object(u.jsx)(O.b,{to:{pathname:"/post/"+e._id},children:"See full post"})})]})]},e._id)}))})}))}),P=function(){return Object(c.useEffect)((function(){document.title="About"}),[]),Object(u.jsx)("p",{className:"mx-1 mt-4",children:"Linky"})},B=function(){var e=Object(c.useState)(),t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){console.log(document.body.clientHeight),console.log(window.scrollY),console.log(window.innerHeight);var e=localStorage.getItem("user");e&&(e=JSON.parse(e),n(e))}),[]),Object(u.jsx)(O.a,{children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(g,{user:a,setUser:n}),Object(u.jsxs)(y.c,{children:[Object(u.jsx)(y.a,{exact:!0,path:"/",children:Object(u.jsx)(L,{className:"app"})}),Object(u.jsx)(y.a,{path:"/about",children:Object(u.jsx)(P,{})}),Object(u.jsx)(y.a,{path:"/post/:id",children:Object(u.jsx)(S,{})}),Object(u.jsx)(y.a,{path:"/login",render:function(e){return Object(u.jsx)(C,Object(j.a)({setUser:n},e))}}),Object(u.jsx)(y.a,{path:"/signup",render:function(e){return Object(u.jsx)(k,Object(j.a)({setUser:n},e))}})]})]})})};r.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(B,{})}),document.getElementById("root")),i()}},[[97,1,2]]]);
//# sourceMappingURL=main.3efa991d.chunk.js.map